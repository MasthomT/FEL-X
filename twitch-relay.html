<!DOCTYPE html>
<html>
<head>
    <title>Twitch Redirect</title>
    <script>
        // Récupère l'URL complète
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
        const state = urlParams.get('state') || 'admin_mode';

        if (code) {
            // L'URL LOCALE VERS VOTRE FLASK
            const localUrl = `http://192.168.1.109:8080/auth/twitch/callback?code=${code}&state=${state}`;
            window.location.replace(localUrl);
        } else {
            console.error("Code d'autorisation manquant.");
            document.getElementById('status').innerText = "Erreur: Code d'autorisation Twitch non reçu.";
        }
    </script>
</head>
<body>
    <p>Redirection sécurisée en cours vers votre serveur local...</p>
    <p id="status"></p>
</body>
</html>