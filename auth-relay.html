<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>FEL-X Auth</title>
</head>
<body style="background: #18181b; color: #00f5c3; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh;">
    <div style="text-align: center;">
        <h2>Connexion réussie !</h2>
        <p>Redirection vers votre profil...</p>
    </div>

    <script>
        // On récupère le token derrière le #
        const hash = window.location.hash.substring(1);
        const params = new URLSearchParams(hash);
        const token = params.get('access_token');

        if (token) {
            localStorage.setItem("twitch_token", token);
            // On force le chemin absolu vers profile.html (AVEC LE E)
            window.location.replace(window.location.origin + "/profile.html"); 
        } else {
            window.location.replace(window.location.origin + "/index.html");
        }
    </script>
</body>
</html>