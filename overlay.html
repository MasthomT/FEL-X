<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Overlay Shoutout</title>
    <style>
        body { margin: 0; overflow: hidden; background: transparent; }
        #player {
            position: absolute; top: 20px; right: 20px;
            width: 480px; height: 272px;
            display: none;
            border: 4px solid #9146FF; border-radius: 12px;
            background: #000;
        }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>
    <div id="player">
        <iframe id="clip-frame" src="" allow="autoplay; fullscreen"></iframe>
    </div>

    <script>
        // ADRESSE DE VOTRE PI (VÃ©rifiez les : et les /)
        const PI_API_URL = "http://192.168.1.109:8080/api/overlay_status";

        setInterval(() => {
            fetch(PI_API_URL)
                .then(r => r.json())
                .then(data => {
                    const div = document.getElementById('player');
                    const frame = document.getElementById('clip-frame');

                    if (data.active && data.url) {
                        if (frame.src !== data.url) {
                            console.log("Chargement:", data.url);
                            frame.src = data.url;
                            div.style.display = 'block';
                        }
                    } else {
                        div.style.display = 'none';
                        frame.src = "";
                    }
                })
                .catch(err => console.log("Attente connexion..."));
        }, 1000);
    </script>
</body>
</html>